function Banners(){}Banners.prototype.ListenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.CreateBannerItem()})},Banners.prototype.LoadData=function(){var r=this;xfzajax.get({url:"/cms/banners_list/",success:function(n){if(200===n.code)for(var e=n.data,t=0;t<e.length;t++){var a=e[t];r.CreateBannerItem(a)}}})},Banners.prototype.CreateBannerItem=function(n){var e=this,t=template("banner-item",{banner:n}),a=$(".banner-list-group"),r=null;r=n?(a.append(t),a.find(".banner-item:last")):(a.prepend(t),a.find(".banner-item:first")),e.AddImageSelectEvent(r),e.AddRemoveBannerEvent(r),e.AddSaveBannerEvent(r)},Banners.prototype.AddImageSelectEvent=function(n){var t=n.find(".thumbnail"),e=n.find(".image-input");t.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;t.attr("src",e)}}})})},Banners.prototype.AddRemoveBannerEvent=function(t){t.find(".close-btn").click(function(){var e=t.attr("data-banner-id");e?xfzalert.alertConfirm({text:"是否确定删除该轮播图？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:e},success:function(n){200===n.code&&(console.log(e),t.remove(),window.messageBox.showSuccess("轮播图删除成功！"))}})}}):t.remove()})},Banners.prototype.AddSaveBannerEvent=function(a){var n=a.find(".save-btn"),r=a.find("span[class=priority]"),i=a.find(".thumbnail"),o=a.find("input[name='priority']"),s=a.find("input[name='link_to']"),c=a.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banners/",n.click(function(){var n=i.attr("src"),e=o.val(),t=s.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:t,pk:c},success:function(n){200===n.code&&(c?(a.attr("priority",e),window.messageBox.showSuccess("轮播图修改成功。")):(c=n.data.banner_id,a.attr("data-banner-id",c),window.messageBox.showSuccess("添加成功！")),r.text("优先级："+e))}})})},Banners.prototype.run=function(){this.ListenAddBannerEvent(),this.LoadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNtcy9jbXNfYmFubmVycy5qcyJdLCJuYW1lcyI6WyJCYW5uZXJzIiwicHJvdG90eXBlIiwiTGlzdGVuQWRkQmFubmVyRXZlbnQiLCJzZWxmIiwidGhpcyIsIiQiLCJjbGljayIsImNoaWxkcmVuIiwibGVuZ3RoIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwiQ3JlYXRlQmFubmVySXRlbSIsIkxvYWREYXRhIiwieGZ6YWpheCIsImdldCIsInVybCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJiYW5uZXJzIiwiaSIsImJhbm5lciIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwiYmFubmVySXRlbSIsImFwcGVuZCIsImZpbmQiLCJwcmVwZW5kIiwiQWRkSW1hZ2VTZWxlY3RFdmVudCIsIkFkZFJlbW92ZUJhbm5lckV2ZW50IiwiQWRkU2F2ZUJhbm5lckV2ZW50IiwiaW1hZ2UiLCJpbWFnZUlucHV0IiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsInBvc3QiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsImF0dHIiLCJiYW5uZXJpZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJzaG93U3VjY2VzcyIsInNhdmVCdG4iLCJwcmlvcml5U3BhbiIsImltYWdlVGFnIiwicHJpb3JpdHlUYWciLCJsaW5rdG9UYWciLCJiYW5uZXJJZCIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxXQUtUQSxRQUFRQyxVQUFVQyxxQkFBdUIsV0FDckMsSUFBSUMsRUFBT0MsS0FDRUMsRUFBRSxtQkFDUkMsTUFBTSxXQUlLLEdBSFFELEVBQUUsc0JBRUtFLFdBQVdDLE9BRXBDQyxPQUFPQyxXQUFX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QyxZQUFZLFVBR2xDRSxFQUFZUixLQUFLLE9BQVFjLFVBUTdDN0QsUUFBUUMsVUFBVWdFLElBQU0sV0FDVDdELEtBQ05GLHVCQURNRSxLQUVOUyxZQUdUUixFQUFFLFlBQ2dCLElBQUlMLFNBQ1ZpRSIsImZpbGUiOiJjbXMvY21zX2Jhbm5lcnMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g6L2u5pKt5Zu+566h55CG77ybXHJcbmZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59XHJcblxyXG4vLyDmt7vliqDova7mkq3lm77ku6Xlj4rkuIrpmZDmlbDph4/vvJtcclxuQmFubmVycy5wcm90b3R5cGUuTGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJCgnI2FkZC1iYW5uZXItYnRuJyk7XHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKCcuYmFubmVyLWxpc3QtZ3JvdXAnKTtcclxuICAgICAgICAvLyDkvb/nlKjigJhjaGlsZHJlbuKAmeaLv+WIsOKAmGJhbm5lckxpc3RHcm91cOKAmeS4i+aJgOacieeahOWtkOWFg+e0oO+8jOWNs+aJgOaciei9ruaSreWbvu+8m1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA2KXtcclxuICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0luZm8oJ+acgOWkmuWPquiDvea3u+WKoDblvKDova7mkq3lm77vvIEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLkNyZWF0ZUJhbm5lckl0ZW0oKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyDluo/liJfljJbmmL7npLrova7mkq3lm77vvJtcclxuQmFubmVycy5wcm90b3R5cGUuTG9hZERhdGEgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICd1cmwnOiAnL2Ntcy9iYW5uZXJzX2xpc3QvJyxcclxuICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIC8vIOmBjeWOhmJhbm5lcnPkuK3miYDmnInnmoTmlbDmja7vvIzlubbljZXni6zmt7vliqDliLDmqKHmnb/kuK3vvJtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPGJhbm5lcnMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhbm5lciA9IGJhbm5lcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5DcmVhdGVCYW5uZXJJdGVtKGJhbm5lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g5Yib5bu6YmFubmVySXRlbe+8m1xyXG5CYW5uZXJzLnByb3RvdHlwZS5DcmVhdGVCYW5uZXJJdGVtID0gZnVuY3Rpb24oYmFubmVyKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnYmFubmVyLWl0ZW0nLHsnYmFubmVyJzpiYW5uZXJ9KTtcclxuICAgIC8vIOijhei9vei9ruaSreWbvueahOebkuWtkO+8m1xyXG4gICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgdmFyIGJhbm5lckl0ZW0gPSBudWxsO1xyXG4gICAgaWYoYmFubmVyKXtcclxuICAgICAgICAvLyDku47mlbDmja7lupPpgY3ljoblh7rmnaXnmoTmlbDmja7pg73lvoDlkI7mt7vliqDvvJtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICAvLyDmib7liLBiYW5uZXJMaXN0R3JvdXDnm5LlrZDkuK3nmoTnrKzkuIDkuKrooajnmoTmlbDmja7vvJtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgIGJhbm5lckl0ZW0gPSBiYW5uZXJMaXN0R3JvdXAuZmluZChcIi5iYW5uZXItaXRlbTpmaXJzdFwiKTtcclxuICAgIH1cclxuICAgIHNlbGYuQWRkSW1hZ2VTZWxlY3RFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuQWRkUmVtb3ZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLkFkZFNhdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxufTtcclxuXHJcblxyXG4vLyDngrnlh7vlm77niYfkuovku7bvvJtcclxuQmFubmVycy5wcm90b3R5cGUuQWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uKGJhbm5lckl0ZW0pe1xyXG4gICAgLy8g54K55Ye75Zu+54mH5pe255u45b2T5LqO54K55Ye75LqG6ZqQ6JeP55qEZmlsZeaWh+S7tu+8m1xyXG4gICAgLy8gdmFyIGltYWdlID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICAvLyBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgdmFyIHRoYXQgPSAkKHRoaXMpO1xyXG4gICAgLy8gICAgIHZhciBpbWFnZUlucHV0ID0gdGhhdC5zaWJsaW5ncygnLmltYWdlLWlucHV0Jyk7XHJcbiAgICAvLyAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgLy8gfSk7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoJy50aHVtYm5haWwnKTtcclxuICAgIHZhciBpbWFnZUlucHV0ID0gYmFubmVySXRlbS5maW5kKCcuaW1hZ2UtaW5wdXQnKTtcclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIC8vIOS4iuS8oOaWh+S7tu+8m1xyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2UuYXR0cignc3JjJyx1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyDngrnlh7vlhbPpl63mjInpkq7kuovku7bvvJtcclxuQmFubmVycy5wcm90b3R5cGUuQWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBjbG9zZUJ0biA9IGJhbm5lckl0ZW0uZmluZCgnLmNsb3NlLWJ0bicpO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJpZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgICAgICBpZihiYW5uZXJpZCl7XHJcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAndGV4dCc6ICfmmK/lkKbnoa7lrprliKDpmaTor6Xova7mkq3lm77vvJ8nLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhiYW5uZXJpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5Yig6Zmk5oiQ5Yqf77yBJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIOeCueWHu+S/neWtmOaMiemSruS6i+S7tu+8m++8iOi/m+ihjOS/neWtmOaIluiAheS/ruaUueS6i+S7tu+8iVxyXG5CYW5uZXJzLnByb3RvdHlwZS5BZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbihiYW5uZXJJdGVtKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBwcmlvcml5U3BhbiA9IGJhbm5lckl0ZW0uZmluZChcInNwYW5bY2xhc3M9cHJpb3JpdHldXCIpO1xyXG4gICAgdmFyIGltYWdlVGFnID0gYmFubmVySXRlbS5maW5kKCcudGh1bWJuYWlsJyk7XHJcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGxpbmt0b1RhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCl7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJ1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgICB1cmwgPSAnL2Ntcy9hZGRfYmFubmVycy8nXHJcbiAgICB9XHJcbiAgICBzYXZlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW1hZ2VfdXJsID0gaW1hZ2VUYWcuYXR0cignc3JjJyk7XHJcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rdG9UYWcudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IHVybCxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnaW1hZ2VfdXJsJzogaW1hZ2VfdXJsLFxyXG4gICAgICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICAnbGlua190byc6IGxpbmtfdG8sXHJcbiAgICAgICAgICAgICAgICAncGsnOiBiYW5uZXJJZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYmFubmVySWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoJ3ByaW9yaXR5Jyxwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77kv67mlLnmiJDlip/jgIInKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDov5nph4zkuI3og73kvb/nlKh2YXLlrprkuYliYW5uZXJJRO+8jOWug+S8muWcqGlm5YmN5re75Yqg4oCYdmFyIGJhbm5lcklkID0gdW5kZWZpbmTigJnkvb/or6XlgLzkuLrnqbrvvJtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOe7meWxnuaAp+KAmGRhdGEtYmFubmVyLWlk4oCZ5re75Yqg4oCYYmFubmVySUTigJnnmoTlgLzvvIzkuI3nhLblkI7mnJ/ml6Dms5Xojrflj5bor6Xlm77nmoTigJhiYW5uZXJJZOKAmei/m+ihjOS/ruaUueaTjeS9nO+8m1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJyxiYW5uZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfmt7vliqDmiJDlip/vvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5L+u5pS55LyY5YWI57qnc3Bhbuagh+etvueahOWGheWuue+8m1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXlTcGFuLnRleHQoJ+S8mOWFiOe6p++8micrIHByaW9yaXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8g6L+Q6KGM77ybXHJcbkJhbm5lcnMucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYuTGlzdGVuQWRkQmFubmVyRXZlbnQoKTtcclxuICAgIHNlbGYuTG9hZERhdGEoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lcnMgPSBuZXcgQmFubmVycygpO1xyXG4gICAgYmFubmVycy5ydW4oKTtcclxufSk7Il19
