function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.switchBtn=$(".switch"),t.smsCaptcha=$(".SMS-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var n=this;n.switchBtn.click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var t=$(".signin-group"),a=t.find("input[name='telephone']"),s=t.find("input[name='password']"),i=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=a.val(),n=s.val(),e=i.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){console.log(12111),window.location.reload()}})})},Auth.prototype.listenRegisterEvent=function(){var f=$(".signup-group");f.find(".submit-btn").click(function(t){t.preventDefault();var n=f.find("input[name='telephone']"),e=f.find("input[name='username']"),a=f.find("input[name='password1']"),s=f.find("input[name='password2']"),i=f.find("input[name='img_captcha']"),o=f.find("input[name='sms_captcha']"),r=n.val(),c=e.val(),p=a.val(),u=s.val(),l=i.val(),h=o.val();xfzajax.post({url:"/account/register/",data:{telephone:r,username:c,password1:p,password2:u,img_captcha:l,sms_captcha:h},success:function(t){window.location.reload()}})})},Auth.prototype.listenImageCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=60;t.smsCaptcha.unbind("click");var e=setInterval(function(){t.smsCaptcha.text(n+"s"),(n-=1)<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listenSmsCaptchaEvent())},1e3)},Auth.prototype.listenSmsCaptchaEvent=function(){var n=this,e=$(".signup-group input[name='telephone']");n.smsCaptcha.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码！"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){n.smsSuccessEvent()}})})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImageCaptchaEvent(),t.listenSmsCaptchaEvent(),t.listenRegisterEvent()},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;if(a<60)return"刚刚";if(60<=a&&a<3600)return(c=parseInt(a/60))+"分钟前";if(3600<=a&&a<86400)return hours=parseInt(a/60/60),hours+"小时前";if(86400<=a&&a<2592e3)return days=parseInt(a/60/60/24),days+"天前";var s=n.getFullYear(),i=n.getMonth(),o=n.getDay(),r=n.getHours(),c=n.getMinutes();return s+"/"+i+"/"+o+" "+r+":"+c})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250L2Zyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInN3aXRjaEJ0biIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoQm94SG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwic2hvd0V2ZW50IiwiaGlkZUV2ZW50IiwibGlzdGVuU2hvd0hpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsImxpc3RlblNpZ25pbkV2ZW50Iiwic2lnbmluR3JvdXAiLCJ0ZWxlcGhvbmVJbnB1dCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInRlbGVwaG9uZSIsInZhbCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImxpc3RlblJlZ2lzdGVyRXZlbnQiLCJzaWdudXBHcm91cCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsImltZ0NhcHRjaGFJbnB1dCIsInNtc0NhcHRjaGFJbnB1dCIsInVzZXJuYW1lIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwiaW1nX2NhcHRjaGEiLCJzbXNfY2FwdGNoYSIsImxpc3RlbkltYWdlQ2FwdGNoYUV2ZW50IiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2Vzc0V2ZW50IiwibWVzc2FnZUJveCIsInNob3dTdWNjZXNzIiwiYWRkQ2xhc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwibGlzdGVuU21zQ2FwdGNoYUV2ZW50Iiwic2hvd0luZm8iLCJnZXQiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJob3VycyIsImRheXMiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF5IiwiaG91ciIsImdldEhvdXJzIiwiZ2V0TWludXRlcyJdLCJtYXBwaW5ncyI6IkFBQ0EsU0FBU0EsYUFxQlQsU0FBU0MsT0FDTCxJQUFJQyxFQUFPQyxLQUNYRCxFQUFLRSxZQUFjQyxFQUFFLGlCQUNyQkgsRUFBS0ksY0FBZ0JELEVBQUUsbUJBQ3ZCSCxFQUFLSyxVQUFZRixFQUFFLFdBQ25CSCxFQUFLTSxXQUFhSCxFQUFFLG9CQXRCeEJMLFVBQVVTLFVBQVVDLElBQU0sV0FDWFAsS0FDTlEsc0JBSVRYLFVBQVVTLFVBQVVFLG1CQUFxQixXQUNyQyxJQUFJQyxFQUFVUCxFQUFFLGFBQ1pRLEVBQWNSLEVBQUUsa0JBQ3BCTyxFQUFRRSxNQUFNLFdBQ1ZELEVBQVlFLFFBQ2QsV0FDRUYsRUFBWUcsVUFjcEJmLEtBQUtRLFVBQVVRLFVBQVksV0FDWmQsS0FDTkMsWUFBWVcsUUFJckJkLEtBQUtRLFVBQVVTLFVBQVksV0FDWmYsS0FDTkMsWUFBWVksUUFJckJmLEtBQUtRLFVBQVVVLG9CQUFzQixXQUNqQyxJQUFJakIsRUFBT0MsS0FDUGlCLEVBQVlmLEVBQUUsZUFDZGdCLEVBQVloQixFQUFFLGVBQ2RpQixFQUFXakIsRUFBRSxjQUNqQmUsRUFBVUcsTUFBTSxXQUNackIsRUFBS2UsWUFD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eEIxQyxRQUFRMkMsSUFBSSxDQUNSekMsSUFBTyx3QkFDUEMsS0FBUSxDQUNKUixVQUFhQSxHQUVqQlMsUUFBVyxTQUFVQyxHQUNiNUMsRUFBS3FFLHdCQU16QnRFLEtBQUtRLFVBQVVDLElBQU0sV0FDakIsSUFBSVIsRUFBT0MsS0FDWEQsRUFBS2lCLHNCQUNMakIsRUFBS3dCLG9CQUNMeEIsRUFBSzRCLG9CQUNMNUIsRUFBS2dFLDBCQUNMaEUsRUFBS2dGLHdCQUNMaEYsRUFBS2tELHVCQUdUL0MsRUFBRSxZQUNhLElBQUlKLE1BQ1ZTLFFBR1RMLEVBQUUsWUFDa0IsSUFBSUwsV0FDVlUsUUFHZEwsRUFBRSxXQUNLNEMsT0FBT29DLFdBRU5BLFNBQVNDLFNBQVNDLFFBQVFDLFVBQVksU0FBVUMsR0FDNUMsSUFBSUMsRUFBTyxJQUFJQyxLQUFLRixHQUNoQkcsRUFBU0YsRUFBS0csVUFFZEMsSUFEUSxJQUFLSCxNQUFRRSxVQUNBRCxHQUFVLElBQ25DLEdBQUlFLEVBQVksR0FDWixNQUFPLEtBQ0osR0FBaUIsSUFBYkEsR0FBbUJBLEVBQVksS0FFdEMsT0FEQUMsRUFBVW5FLFNBQVNrRSxFQUFZLEtBQ2QsTUFDZCxHQUFpQixNQUFiQSxHQUF3QkEsRUFBWSxNQUUzQyxPQURBRSxNQUFRcEUsU0FBU2tFLEVBQVksR0FBSyxJQUMzQkUsTUFBUSxNQUNaLEdBQWlCLE9BQWJGLEdBQTZCQSxFQUFZLE9BRWhELE9BREFHLEtBQU9yRSxTQUFTa0UsRUFBWSxHQUFLLEdBQUssSUFDL0JHLEtBQU8sS0FFZCxJQUFJQyxFQUFPUixFQUFLUyxjQUNaQyxFQUFRVixFQUFLVyxXQUNiQyxFQUFNWixFQUFLYSxTQUNYQyxFQUFPZCxFQUFLZSxXQUNaVixFQUFVTCxFQUFLZ0IsYUFDbkIsT0FBT1IsRUFBTyxJQUFNRSxFQUFRLElBQU1FLEVBQU0sSUFBTUUsRUFBTyxJQUFNVCIsImZpbGUiOiJmcm9udC9mcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIOWvvOiIquagj+S4iueahOeCueWHu+S6i+S7tu+8m1xyXG5mdW5jdGlvbiBGcm9udEJhc2UoKXtcclxuXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcclxufTtcclxuXHJcbi8vIOWkhOeQhueUqOaIt+S4quS6uuS4reW/g+eahOaJk+W8gOWSjOmakOiXj++8m1xyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhCb3hIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoQm94ID0gJCgnLmF1dGgtYm94Jyk7XHJcbiAgICB2YXIgdXNlck1vcmVCb3ggPSAkKCcudXNlci1tb3JlLWJveCcpO1xyXG4gICAgYXV0aEJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guc2hvdygpO1xyXG4gICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDlpITnkIbnmbvlvZXkuI7ms6jlhozvvJtcclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKCcubWFzay13cmFwcGVyJyk7XHJcbiAgICBzZWxmLnNjcm9sbFdyYXBwZXIgPSAkKCcuc2Nyb2xsLXdyYXBwZXInKTtcclxuICAgIHNlbGYuc3dpdGNoQnRuID0gJCgnLnN3aXRjaCcpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhID0gJCgnLlNNUy1jYXB0Y2hhLWJ0bicpO1xyXG59XHJcblxyXG4vLyDngrnlh7vmiZPlvIDnmbvlvZXms6jlhozmoYbvvJtcclxuQXV0aC5wcm90b3R5cGUuc2hvd0V2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuLy8g5YWz6Zet6ZqQ6JeP77ybXHJcbkF1dGgucHJvdG90eXBlLmhpZGVFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKTtcclxufTtcclxuXHJcbi8vIOebkeWQrOaJk+W8gOeZu+W9leazqOWGjOWPiuWFs+mXreaMiemSrueahOS6i+S7tu+8m1xyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5CdG4gPSAkKCcuc2lnbmluLWJ0bicpO1xyXG4gICAgdmFyIHNpZ251cEJ0biA9ICQoJy5zaWdudXAtYnRuJyk7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnRuJyk7XHJcbiAgICBzaWduaW5CdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOjB9KVxyXG4gICAgfSk7XHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7J2xlZnQnOi00MDB9KVxyXG4gICAgfSk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5oaWRlRXZlbnQoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy8g55m75b2V5LiO5rOo5YaM55qE5YiH5o2i77ybXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblN3aXRjaEV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5zd2l0Y2hCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOW9k+WJjeaJk+W8gOeql+WPo+eahOS9jee9ru+8jOazqOWGjOeql+WPozwwPOeZu+W9leeql+WPo++8m1xyXG4gICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoJ2xlZnQnKTtcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZihjdXJyZW50TGVmdCA8IDAgKXtcclxuICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7J2xlZnQnOicwJ30pXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoeydsZWZ0JzonLTQwMHB4J30pXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuLy8g55m75b2V77ybXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlblNpZ25pbkV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkdyb3VwID0gJCgnLnNpZ25pbi1ncm91cCcpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIik7XHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9sb2dpbi8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICdyZW1lbWJlcic6IHJlbWVtYmVyPzE6MFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKDEyMTExKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vLyDms6jlhozvvJtcclxuQXV0aC5wcm90b3R5cGUubGlzdGVuUmVnaXN0ZXJFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2lnbnVwR3JvdXAgPSAkKCcuc2lnbnVwLWdyb3VwJyk7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gc2lnbnVwR3JvdXAuZmluZCgnLnN1Ym1pdC1idG4nKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAgICAgLy8g5Y+W5raI6buY6K6k5LqL5Lu277ybXHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3VzZXJuYW1lJ11cIik7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkMSddXCIpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcclxuICAgICAgICB2YXIgaW1nQ2FwdGNoYUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J2ltZ19jYXB0Y2hhJ11cIik7XHJcbiAgICAgICAgdmFyIHNtc0NhcHRjaGFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdzbXNfY2FwdGNoYSddXCIpO1xyXG4gICAgXHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciB1c2VybmFtZSA9IHVzZXJuYW1lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHNtc19jYXB0Y2hhID0gc21zQ2FwdGNoYUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQxJzogcGFzc3dvcmQxLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkMic6IHBhc3N3b3JkMixcclxuICAgICAgICAgICAgICAgICdpbWdfY2FwdGNoYSc6IGltZ19jYXB0Y2hhLFxyXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zX2NhcHRjaGEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vIOWbvuW9oumqjOivgeeggeeCueWHu+S6i+S7tu+8m1xyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5JbWFnZUNhcHRjaGFFdmVudCAgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGltZ0NhcHRjaGEgPSAkKFwiLmltZy1jYXB0Y2hhXCIpO1xyXG4gICAgaW1nQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1nQ2FwdGNoYS5hdHRyKFwic3JjXCIsXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIitcIj9yYW5kb209XCIrTWF0aC5yYW5kb20oKSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy8g5oiQ5Yqf5Y+R6YCB55+t5L+h6aqM6K+B56CB77ybXHJcbkF1dGgucHJvdG90eXBlLnNtc1N1Y2Nlc3NFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBtZXNzYWdlQm94LnNob3dTdWNjZXNzKCfnn63kv6Hpqozor4HnoIHlj5HpgIHmiJDlip/vvIEnKTtcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5hZGRDbGFzcygnZGlzYWJsZWQnKTsgICAvLyDmt7vliqDlj6bkuIDkuKrooajnpLrml6Dms5Xngrnlh7vnmoTnsbvnmoTmoLflvI/vvJtcclxuICAgIHZhciBjb3VudCA9IDYwO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLnVuYmluZCgnY2xpY2snKTsgICAgLy8g6Kej6Zmk54K55Ye75LqL5Lu277ybXHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQrJ3MnKTtcclxuICAgICAgICBjb3VudCAtPSAxO1xyXG4gICAgICAgIGlmKGNvdW50PD0wKXtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICBzZWxmLmxpc3RlblNtc0NhcHRjaGFFdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sMTAwMCk7XHJcbn07XHJcblxyXG4vLyDnn63kv6Hpqozor4HnoIHngrnlh7vkuovku7bvvJtcclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9ICQoXCIuc2lnbnVwLWdyb3VwIGlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYoIXRlbGVwaG9uZSl7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd0luZm8oJ+ivt+i+k+WFpeaJi+acuuWPt+egge+8gScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvc21zX2NhcHRjaGEvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNtc1N1Y2Nlc3NFdmVudCgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcbi8vIOi/kOihjO+8m1xyXG5BdXRoLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblNob3dIaWRlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3dpdGNoRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU2lnbmluRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuSW1hZ2VDYXB0Y2hhRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU21zQ2FwdGNoYUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblJlZ2lzdGVyRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGggPSBuZXcgQXV0aCgpO1xyXG4gICAgYXV0aC5ydW4oKTtcclxufSk7XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbiAgICBmcm9udEJhc2UucnVuKCk7XHJcbn0pO1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICBpZih3aW5kb3cudGVtcGxhdGUpe1xyXG4gICAgICAgIC8vIOS9v+eUqGFydHRlbXBsYXRl5qih5p2/6ZyA6YeN5paw5a6a5LmJ5pe26Ze06L+H5ruk5Zmo77ybXHJcbiAgICAgICAgdGVtcGxhdGUuZGVmYXVsdHMuaW1wb3J0cy50aW1lU2luY2UgPSBmdW5jdGlvbiAoZGF0ZVZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZGF0ZVZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIGRhdGV0cyA9IGRhdGUuZ2V0VGltZSgpOyAgICAgICAgICAgICAvL+W+l+WIsOeahOaYr+avq+enku+8m1xyXG4gICAgICAgICAgICB2YXIgbm93dHMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOyAgICAgIC8vIOW+l+WIsOW9k+WJjeaXtumXtOaIs++8m1xyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gKG5vd3RzIC0gZGF0ZXRzKSAvIDEwMDA7ICAgLy/pmaTku6UxMDAw5b6X5Yiw56eS77ybXHJcbiAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICfliJrliJonO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwKSB7XHJcbiAgICAgICAgICAgICAgICBtaW51dGVzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcclxuICAgICAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91cnMgKyAn5bCP5pe25YmNJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAqIDI0ICYmIHRpbWVzdGFtcCA8IDYwICogNjAgKiAyNCAqIDMwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXlzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MCAvIDI0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXlzICsgJ+WkqeWJjSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHZhciBtb250aCA9IGRhdGUuZ2V0TW9udGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIgKyAnLycgKyBtb250aCArICcvJyArIGRheSArICcgJyArIGhvdXIgKyAnOicgKyBtaW51dGVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSk7Il19
